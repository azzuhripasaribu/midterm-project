<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-Zenh87qX5JnK2Jl0vWa8Ck2rdkQ2Bzep5IDxbcnCeuOxjzrPF/et3URy9Bv1WTRi" crossorigin="anonymous">
    <title>Document</title>
</head>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-OERcA2EqjJCMA+/3y+gxIOqMEjwtxJY7qPCqsdltbNJuaOe923+mo//f6V8Qbsw3" crossorigin="anonymous"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script>
        $(document).ready(()=>{
            let Current_path = window.location.href;
            let center_JSON_path = Current_path + "json"
            let areas_JSON_path = Current_path + "areas"
            $.get(center_JSON_path,(data)=>{
                for(var i = 0; i < data.length; i++) {
                    let center = data[i].fields;
                    let name = center.name;
                    let website = center.website;
                    let email = center.email;
                    pk = data[i].pk;
                    $("<li class=\"list-group-item shadow-sm mb-3 border-top rounded-3\"><h2>"+name+"</h2>Website:<p><a href=\""+website+"\">"+website+"</a></p>email:<p>"+email+"</p>areas:<ul class=\"list-group\" id=\"areas-"+pk+"\"></ul></li>").appendTo("#center-list")
                }
            });

            $.get(areas_JSON_path,(data)=>{
                for(var i = 0; i < data.length; i++) {
                    let area = data[i].fields;
                    centers = area.center
                    for(var j = 0; j < centers.length; j++){
                        $("<li class=\"list-group-item w-25\" >"+area.name+"</li>").appendTo("#areas-" + centers[j])
                    }
                }
            });

        });
    </script>
    <div class="container">
        <div class="row">
            <div class="col">
                <h1 class="text-center font-weight-light">Find Centers</h1>
            </div>
        </div>
        <div class="row">
            <div class="col">
                <ul class="list-group" id="center-list">
                </ul>
            </div>
        </div>
    </div>
</body>
</html>